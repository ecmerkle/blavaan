<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="blavaan">
<title>Model Estimation • blavaan</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Model Estimation">
<meta property="og:description" content="blavaan">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">blavaan</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4-2.913</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-basics">Basics</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-basics">
    <a class="dropdown-item" href="../articles/start.html">Getting Started</a>
    <a class="dropdown-item" href="../articles/prior.html">Prior Specification</a>
    <a class="dropdown-item" href="../articles/estimate.html">Estimation</a>
    <a class="dropdown-item" href="../articles/summaries.html">Model Summaries</a>
    <a class="dropdown-item" href="../articles/plotting.html">Plots</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-examples-details">Examples/Details</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-examples-details">
    <a class="dropdown-item" href="../articles/invariance.html">Measurement Invariance</a>
    <a class="dropdown-item" href="../articles/ordinal.html">Estimation with Ordinal Data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/resources.html">Resources</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ecmerkle/blavaan">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://groups.google.com/d/forum/blavaan">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="estimate_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Model Estimation</h1>
            
      
      
      <div class="d-none name"><code>estimate.Rmd</code></div>
    </div>

    
    
<p>Models are specified using <em>lavaan</em> syntax, and prior distribution specification can already been covered on the <a href="prior.html">previous page</a>. The specified model can then be estimated via the <code><a href="../reference/bsem.html">bsem()</a></code> command, with other models being estimated via <code><a href="../reference/bcfa.html">bcfa()</a></code>, <code><a href="../reference/bgrowth.html">bgrowth()</a></code>, or <code><a href="../reference/blavaan.html">blavaan()</a></code>. Regardless of the command, there are many arguments that allow you to tailor the model estimation to your needs. We discuss here some of the most popular arguments, as well as some easy-to-miss arguments.</p>
<div class="section level3">
<h3 id="primary-arguments">Primary arguments<a class="anchor" aria-label="anchor" href="#primary-arguments"></a>
</h3>
<p>Primary arguments to the model estimation commands include <code>burnin</code>, <code>sample</code>, <code>n.chains</code>, and <code>target</code>. The <code>burnin</code> and <code>sample</code> arguments are used to specify the desired number of burn-in iterations and posterior samples for each of <code>n.chains</code> chains (and the <code>burnin</code> argument controls the <em>warm-up</em> iterations in Stan). The <code>target</code> argument, on the other hand, is used to specify the MCMC strategy used for estimation. The default, <code>target = "stan"</code>, tends to be fastest and most efficient. Other options are slightly more flexible, including <code>target = "stanclassic"</code> and <code>target = "jags"</code>. Both of these approaches sample latent variables as if they are model parameters, whereas <code>target = "stan"</code> marginalizes out the latent variables. For more detail of these approaches, see the <a href="https://www.jstatsoft.org/article/view/v100i06" class="external-link">JSS paper</a>.</p>
</div>
<div class="section level3">
<h3 id="secondary-arguments">Secondary arguments<a class="anchor" aria-label="anchor" href="#secondary-arguments"></a>
</h3>
<p>Noteworthy secondary arguments include <code>save.lvs</code>, <code>mcmcfile</code>, <code>mcmcextra</code>, and <code>inits</code>.</p>
<p>The <code>save.lvs</code> argument controls whether or not latent variables are sampled during model estimation. It defaults to <code>FALSE</code> because the latent variable sampling can take a large amount of memory, and can slow down some post-estimation summaries. But setting <code>save.lvs = TRUE</code> allows for model summaries of latent variables and observed variable predictions using <code><a href="../reference/blavPredict.html">blavPredict()</a></code> and other functions.</p>
<p>By setting <code>mcmcfile = TRUE</code>, users can obtain the Stan (JAGS) code and data for the specified model. These files are written to the <code>lavExport</code> folder within a user’s working directory. One file has extension .jag or .stan, and the second file is an R data file (extension .rda). The rda file can be loaded in R (via <code><a href="https://rdrr.io/r/base/load.html" class="external-link">load()</a></code>) and will be a list including elements <code>data</code>, <code>monitors</code>, and <code>inits</code>. These elements can be supplied to <code>stan()</code> for model estimation outside of <em>blavaan</em>.</p>
<p>The <code>mcmcextra</code> argument is used to supply extra information to Stan or JAGS. Users can supply a list with element names <code>monitor</code>, <code>data</code>, <code>syntax</code>, or <code>llnsamp</code>. These elements are respectively used to specify extra parameters to monitor, extra data to pass to the model estimation, extra syntax to include in the model file (JAGS only), and the number of importance samples for likelihood approximation (which is only relevant to models with ordinal variables).</p>
<p>The <code>inits</code> argument is used to control the starting values for MCMC estimation. It can sometimes salvage a model that immediately crashes. The default, <code>inits = "prior"</code>, draws initial values from the prior distributions. A second option, <code>inits = "simple"</code>, initializes model parameters to 0 and 1 in fashion similar to <em>lavaan</em>’s use of this argument. The user can also specify a list of their own initial values via this argument, though the required list format is somewhat cumbersome. We recommend exporting the model and data using <code>mcmcfile = TRUE</code>, loading the resulting rda file, and looking at the format of the initial values that <em>blavaan</em> created there.</p>
</div>
<div class="section level3">
<h3 id="parallelization">Parallelization<a class="anchor" aria-label="anchor" href="#parallelization"></a>
</h3>
<p>Speed is always an issue when we sample via MCMC, especially using software like Stan or JAGS. For computers with multiple cores, the estimation can be sped up by sending each MCMC chain to a separate core. This is accomplished with the <code>bcontrol</code> argument, which is a list whose elements correspond to <code>stan()</code> or <code>run.jags()</code> arguments. For parallelizing the chains in Stan, we would want to use the argument <code>bcontrol = list(cores = 3)</code>. Many other arguments are available here; see <code>?stan</code> or <code>?run.jags</code> for all the possibilities.</p>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Edgar Merkle, Yves Rosseel, Ben Goodrich.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
